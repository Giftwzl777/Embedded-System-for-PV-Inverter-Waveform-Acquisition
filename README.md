# Embedded System for PV Inverter Waveform Acquisition

## 项目简介

本项目设计并实现了一套基于 STM32 的光伏逆变器交流侧电压、电流波形的**高频实时采集系统**，具备**高精度采样、本地上传、波形异常诊断、数据压缩与远程高效上传**等核心功能。

系统整体架构由**STM32 实时采集节点 + 云端数据库与服务平台**组成，支持高频交流侧波形的数据获取与智能处理，适用于电力系统运行状态监测与异常诊断场景。

---

## 项目职责与技术实现

### 1. 硬件电路设计与测试
- 使用 **嘉立创EDA** 完成 STM32 及 IMX6ULL 的原理图与 PCB 设计。
- 打板并完成硬件调试，确保信号完整性和模块兼容性。

### 2. STM32 采集系统开发
- 使用 **Keil + C 语言** 开发 STM32 端嵌入式程序；
- 配置 **ADC 模块** 实现高频实时采样交流侧电流、电压波形；
- 为满足高精度采样要求，设计基于 MOS 管的**可调仪表放大器**。

### 3. 通信与数据上传
- 通过 **RS-485 接口实现 TL698 协议通信**，对接上层设备；
- 驱动 **Quectel BC20 NB-IoT 模块**，通过 AT 指令实现远程连接；
- 使用 **MQTT 协议**将采集数据上报至 **EMQX 消息服务器**，写入 **MySQL 数据库**实现云端存储与后续分析。

### 4. IMX6ULL 平台开发
- 协助完成基于 **Linux 的数据处理模块**设计与部署；
- 参与开发：
  - **电压电流波形异常识别算法**；
  - **高效数据压缩模块（压缩率 > 50%）**；
  - **远程上传策略**，提升整体系统带宽利用率与响应速度。

---

## 项目成果

| 模块 | 精度表现 | 备注 |
|------|----------|------|
| STM32 采集系统 | 波形误差 < **1%** | 高频波形采样 |
| IMX6ULL 采集系统 | 波形误差 < **0.5%** | 增加软件滤波与校正 |
| 数据压缩模块 | 压缩率 > **50%** | 保留关键特征后压缩 |

系统实现了从**高精度采样 → 边缘诊断 → 有效压缩 → 云端存储**的完整闭环处理流程。

---

## 技术要点

- **MCU 芯片：** STM32F103C8T6
- **Linux平台：** IMX6ULL
- **ADC 配置：** 12 位，采样频率 10kHz+
- **采集信号类型：** 交流侧电压、电流波形  
- **通信模块：** Quectel BC20（NB-IoT）  
- **通信协议：** DLT698.45、MQTT  
- **数据库：** MySQL  



